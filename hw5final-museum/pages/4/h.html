<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>HALO</title>
  <link rel="stylesheet" href="css/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@300;600&family=Share+Tech+Mono&display=swap" rel="stylesheet">

</head>
<body>

  <div class="dust"></div>

  <div class="content">
    <h1>Shooting Colorful Aliens</h1>
    <div id="typeArea" class="typewrap"></div>
  </div>


  <script>
  (function () {

    const RAW = `I remember this being
      one of the few games that I was able to
      play with my brother,
      because it was couch-op.

      I unfortunately don't think
       I was a very helpful teammate
       when I was 8 years old. I just wanted to talk and pet the big blue aliens (covenants).`;

    const TEXT = RAW.replace(/\r/g, '');
    const area = document.getElementById('typeArea');

    let idx = 0;
    const cursor = document.createElement('span');
    cursor.className = 'cursor';

    function typeStep() {
      if (idx >= TEXT.length) {
        cursor.remove();
        return;
      }

      const ch = TEXT[idx];
      cursor.remove();

      if (ch === '\n') {
        area.appendChild(document.createElement('br'));
      } else if (ch === ' ') {
        area.appendChild(document.createTextNode('\u00A0'));
      } else {
        area.appendChild(document.createTextNode(ch));
      }

      area.appendChild(cursor);
      idx++;

      const delay = 18 + Math.random() * 22;
      setTimeout(typeStep, delay);
    }

    function start() {
      area.appendChild(cursor);
      typeStep();
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', start);
    } else {
      start();
    }

  })();
  </script>

</body>
</html>
